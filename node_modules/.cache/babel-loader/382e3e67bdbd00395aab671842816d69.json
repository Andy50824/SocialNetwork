{"ast":null,"code":"const followAC = 'FOLLOW';\nconst unfollowAC = 'UNFOLLOW';\nconst setUsersAC = 'set-users';\nconst setPageAC = 'set-page';\nconst setTotalAC = 'set-total-users';\nconst following_in_progress = 'following-in-progress';\nlet initialState = {\n  usersData: [],\n  totalCount: 0,\n  pageSize: 10,\n  currentPage: 1,\n  currentUserId: 1,\n  followingInProgress: []\n};\n\nconst usersReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case followAC:\n      return { ...state,\n        usersData: state.usersData.map(u => {\n          if (u.id === action.userId) {\n            return { ...u,\n              followed: true\n            };\n          }\n\n          return u;\n        })\n      };\n\n    case unfollowAC:\n      return { ...state,\n        usersData: state.usersData.map(u => {\n          if (u.id === action.userId) {\n            return { ...u,\n              followed: false\n            };\n          }\n\n          return u;\n        })\n      };\n\n    case setUsersAC:\n      return { ...state,\n        usersData: [...action.users]\n      };\n\n    case setPageAC:\n      return { ...state,\n        currentPage: action.page\n      };\n\n    case setTotalAC:\n      return { ...state,\n        totalCount: action.total\n      };\n\n    case following_in_progress:\n      return { ...state,\n        followingInProgress: action.isFetching ? [...state.followingInProgress, action.userId] : state.followingInProgress.filter(id => id !== action.userId)\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const follow = userId => ({\n  type: followAC,\n  userId\n});\nexport const unfollow = userId => ({\n  type: unfollowAC,\n  userId\n});\nexport const setUsers = users => ({\n  type: setUsersAC,\n  users\n});\nexport const setPage = page => ({\n  type: setPageAC,\n  page\n});\nexport const setTotal = total => ({\n  type: setTotalAC,\n  total\n});\nexport const toggleFollowingProgress = (isFetching, userId) => ({\n  type: following_in_progress,\n  isFetching,\n  userId\n});\n\nconst getUsers = dispatch => {\n  userAPI.getUsers(this.props.currentPage, this.props.pageSize).then(data => {\n    dispatch(setUsers(data.items));\n    disetTotal(data.totalCount);\n  });\n};\n\nexport default usersReducer;","map":{"version":3,"names":["followAC","unfollowAC","setUsersAC","setPageAC","setTotalAC","following_in_progress","initialState","usersData","totalCount","pageSize","currentPage","currentUserId","followingInProgress","usersReducer","state","action","type","map","u","id","userId","followed","users","page","total","isFetching","filter","follow","unfollow","setUsers","setPage","setTotal","toggleFollowingProgress","getUsers","dispatch","userAPI","props","then","data","items","disetTotal"],"sources":["/Users/andrey/Desktop/networkproject/SocialNetwork/src/Redux/usersReducer.js"],"sourcesContent":["\nconst followAC = 'FOLLOW'\nconst unfollowAC = 'UNFOLLOW'\nconst setUsersAC = 'set-users'\nconst setPageAC = 'set-page'\nconst setTotalAC = 'set-total-users'\nconst following_in_progress = 'following-in-progress'\n\nlet initialState = {\n    usersData: [],\n    totalCount: 0,\n    pageSize: 10,\n    currentPage: 1,\n    currentUserId: 1,\n    followingInProgress: [],\n};\n\nconst usersReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case followAC:\n            return {...state, usersData: state.usersData.map( u => {\n                if (u.id === action.userId) {\n                    return {...u, followed: true}\n                }\n                return u\n            })}\n\n        case unfollowAC:\n            return {...state, usersData: state.usersData.map(u => {\n                if (u.id === action.userId) {\n                    return {...u, followed: false}\n                }\n                return u\n            })\n            }\n        case setUsersAC:\n            return {...state, \n                usersData: [...action.users]}\n        case setPageAC:\n            return {...state, \n                currentPage: action.page} \n        case setTotalAC:\n            return {...state, \n                totalCount: action.total}\n        case following_in_progress:\n            return {\n                ...state,\n                followingInProgress: action.isFetching ? [...state.followingInProgress, action.userId]\n                : state.followingInProgress.filter(id => id !== action.userId)\n            }\n        default:\n            return state\n}}\n\nexport const follow = (userId) => ({type: followAC, userId})\nexport const unfollow = (userId) => ({type: unfollowAC, userId})\nexport const setUsers = (users) => ({type: setUsersAC, users})\nexport const setPage = (page) => ({type: setPageAC, page})\nexport const setTotal = (total) => ({type: setTotalAC, total})\nexport const toggleFollowingProgress = (isFetching, userId) => \n({type: following_in_progress, isFetching, userId})\n\nconst getUsers = (dispatch) => {\n    userAPI.getUsers(this.props.currentPage, this.props.pageSize).then(data => {\n        dispatch(setUsers(data.items));\n        disetTotal(data.totalCount)\n}) \n}\n\n\nexport default usersReducer"],"mappings":"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"},"metadata":{},"sourceType":"module"}